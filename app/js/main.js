(function(){var e,t,n,o,i,r,u,c,s,a,h,l,m,d,g,f,p,v,S,T,b,w,C;b=window.require("electron").ipcRenderer,v=require("vue"),T=require("vue-router"),S=require("vue-async-data"),w=require("moment"),a=require("../vues/Navbar.vue"),d=require("../vues/SignIn.vue"),g=require("../vues/SignUp.vue"),o=require("../vues/DeletePopup.vue"),h=require("../vues/Popup.vue"),n=require("../vues/Dashboard.vue"),f=require("../vues/Tasks.vue"),c=require("../vues/Mockups.vue"),u=require("../vues/Mockup.vue"),t=require("../vues/Chat.vue"),p=require("../vues/Teams.vue"),r=require("../vues/JoinTeam.vue"),m=require("../vues/Settings.vue"),v.config.debug=!0,v.use(T),v.use(S),e=v.extend({data:function(){return{theme:{name:"",hasSchedule:!1},timer:null}},ready:function(){return this.theme.name=localStorage.selectedTheme,this.switchTheme(this.theme.name),null!==localStorage.hasSchedule&&(this.theme.hasSchedule="true"===localStorage.hasSchedule),this.theme.hasSchedule&&this.setCountdownToThemeSwitch(),window.change=function(e){return function(t){var n;return 0===t&&(n="dark"),1===t&&(n="light"),e.switchTheme(n)}}(this),b.on("switchTheme",function(e){return function(t,n){return e.switchTheme(n),e.$broadcast("themeChanged",n)}}(this)),b.on("toggleTheme",function(e){return function(t){var n;return n="light"===e.theme.name?"dark":"light",e.theme.name=n,e.switchTheme(n),e.$broadcast("themeChanged",n)}}(this)),b.on("toggleSchedule",function(e){return function(t,n){return e.toggleSchedule(n)}}(this)),b.on("navigateToSettings",function(e){return function(t,n){return localStorage.getItem("userId")?e.$router.go("/settings"):void 0}}(this)),b.on("toggleColorblind",function(e){return function(t,n){return e.toggleColorblind(n)}}(this)),b.send("updateSchedule",this.theme.hasSchedule)},watch:{theme:function(e,t){return this.switchTheme(e)}},methods:{switchTheme:function(e){return document.querySelector("html").className=e,localStorage.selectedTheme=e,b.send("updateTheme",e)},handleLocation:function(e){return console.log(e)},setCountdownToThemeSwitch:function(){var e,t,n,o,i,r;return r=w(),n=w().hour(8).minute(0).second(0),t=w().hour(20).minute(0).second(0),r.isBefore(n)&&(e=n.diff(r),o="light",i={title:"Good morning!",body:"Turning the lights on."}),r.isSameOrAfter(n)&&(e=t.diff(r),o="dark",i={title:"Itâ€˜s getting late...",body:"Turning the lights off."}),r.isSameOrAfter(t)&&(e=n.add(1,"d").diff(r),o="light",i={title:"Good morning!",body:"Turning the lights on..."}),console.log("countdown",e),this.timer=setTimeout(function(e){return function(){return new Notification(i.title,{body:i.body,silent:!0}),setTimeout(function(){return e.switchTheme(o),e.$broadcast("themeChanged",o)},500),e.setCountdownToThemeSwitch()}}(this),e)},toggleSchedule:function(e){return this.theme.hasSchedule=e,localStorage.hasSchedule=e,e?this.setCountdownToThemeSwitch():clearTimeout(this.timer),this.$broadcast("scheduleChanged",e),b.send("updateSchedule",e)},toggleColorblind:function(e){var t;return localStorage.settings?(t=JSON.parse(localStorage.settings),t.usability.isColorblind=e,localStorage.settings=JSON.stringify(t),this.$broadcast("toggleColorblind",e)):void 0}},events:{changeProject:function(e,t){return localStorage.selectedProject=t.uuid,localStorage.selectedTeam=e.uuid,socket.emit("user.join",t.uuid,e.uuid),this.$broadcast("changeProject",e,t)},leftTeam:function(e){return this.$broadcast("leftTeam",e)},changeTheme:function(e){return this.switchTheme(e)},toggleSchedule:function(e){return this.toggleSchedule(e)},toggleColorblind:function(e){return this.toggleColorblind(e)},notificationPreferenceChanged:function(e,t){return this.$broadcast("notificationPreferenceChanged",e,t)},loadNotificationSettings:function(){return console.log("in main coffee"),this.$broadcast("test")},error:function(e){return this.$broadcast("newError",e)}}}),s=v.component("navbar",a),d=v.component("signin-component",d),g=v.component("signup-component",g),i=v.component("delete-popup",o),l=v.component("popup",h),n=v.component("dashboard-component",n),f=v.component("tasks-component",f),c=v.component("mockups-component",c),u=v.component("mockup-component",u),t=v.component("chat-component",t),p=v.component("teams-component",p),r=v.component("jointeam-component",r),m=v.component("settings-component",m),C=new T,C.redirect({"/":"/signin"}),C.map({"/signin":{component:d},"/signup":{component:g},"/dashboard":{component:n},"/tasks":{component:f},"/mockups":{component:c},"/mockups/:id":{component:u},"/chat":{component:t},"/teams":{component:p},"/joinTeam":{component:r},"/settings":{component:m}}),C.start(e,"#app"),socket.on("connect",function(e){return function(){return console.log("connected")}}(this)),socket.on("disconnect",function(e){return function(){return new Notification("Whoops! Connection lost.",{body:"Please wait a moment...",silent:!0})}}(this)),socket.on("reconnect",function(e){return function(){return new Notification("We're good!",{body:"Connection to server established.",silent:!0})}}(this))}).call(this);